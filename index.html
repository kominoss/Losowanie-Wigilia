<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>ÅšwiÄ…teczne Losowanie ğŸğŸ„</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
<style>
:root{--card-bg:rgba(255,255,255,0.95);--accent:#d62828;--green:#0b8a2f}
*{box-sizing:border-box}body{margin:0;min-height:100vh;font-family:"Montserrat",system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;color:#111;background:radial-gradient(ellipse at top,rgba(12,30,45,0.9),rgba(2,10,20,0.95)),url('https://images.unsplash.com/photo-1608889175123-5e24e64df0c6?auto=format&fit=crop&w=1600&q=80') center/cover fixed no-repeat;overflow:hidden;padding:20px;display:flex;justify-content:center;align-items:center}
.wrap{width:100%;max-width:500px;margin:0 auto;display:grid;gap:20px}
.panel{background:linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));padding:20px;border-radius:14px;box-shadow:0 10px 30px rgba(0,0,0,0.6);backdrop-filter:blur(6px);color:#fff;text-align:center}
h1{margin:0 0 12px 0;font-size:28px;color:var(--accent);text-shadow:0 2px 6px rgba(0,0,0,0.6)}
p.lead{margin:0 0 18px 0;color:#ffd;opacity:.95;font-size:16px}
.card{background:var(--card-bg);color:#111;padding:20px;border-radius:12px;box-shadow:0 8px 30px rgba(0,0,0,0.35)}
button.primary{background:linear-gradient(180deg,var(--accent),#b71c1c);color:white;border:0;padding:16px 24px;border-radius:12px;font-size:20px;cursor:pointer;width:100%;max-width:300px;box-shadow:0 6px rgba(0,0,0,0.2);transition: transform .12s ease, box-shadow .12s ease;margin-top:12px}
button.primary:active{transform:translateY(2px);box-shadow:0 3px rgba(0,0,0,0.15)}
#kto{font-size:18px;margin-bottom:12px;color:#333}
#wynik{font-size:22px;font-weight:700;margin-top:14px;color:var(--green)}
.present{display:inline-block;margin:6px;opacity:0;transform:translateY(10px) scale(.9)}
.present.show{animation: pop .6s cubic-bezier(.2,.9,.3,1) forwards}
@keyframes pop{0%{opacity:0;transform:translateY(10px) scale(.8)}60%{opacity:1;transform:translateY(-8px) scale(1.05)}100%{transform:translateY(0) scale(1)}}
.twinkle{position:fixed;z-index:1;pointer-events:none;mix-blend-mode:screen;filter:blur(0.6px);opacity:.9}
@media(max-width:480px){h1{font-size:24px}p.lead{font-size:14px}button.primary{font-size:18px;padding:14px 20px}}
</style>
</head>
<body>

<svg class="twinkle" width="100%" height="120" viewBox="0 0 100 10" preserveAspectRatio="none" style="top:0;left:0">
  <defs><linearGradient id="g1" x1="0" x2="1"><stop offset="0" stop-color="#ffcc66"/><stop offset="1" stop-color="#ff6b6b"/></linearGradient></defs>
  <g fill="url(#g1)" opacity="0.7">
    <circle cx="5" cy="5" r="0.9"/><circle cx="12" cy="5" r="0.9"/><circle cx="19" cy="5" r="0.9"/>
    <circle cx="26" cy="5" r="0.9"/><circle cx="33" cy="5" r="0.9"/><circle cx="40" cy="5" r="0.9"/>
    <circle cx="47" cy="5" r="0.9"/><circle cx="54" cy="5" r="0.9"/><circle cx="61" cy="5" r="0.9"/>
    <circle cx="68" cy="5" r="0.9"/><circle cx="75" cy="5" r="0.9"/><circle cx="82" cy="5" r="0.9"/>
    <circle cx="89" cy="5" r="0.9"/><circle cx="96" cy="5" r="0.9"/>
  </g>
</svg>

<div class="wrap">
  <div class="panel">
    <h1>ÅšwiÄ…teczne Losowanie</h1>
    <p class="lead">Kliknij â€LOSUJâ€ aby poznaÄ‡ swojego prezentodawcÄ™ ğŸ</p>
    <div class="card">
      <div id="kto">Åadowanieâ€¦</div>
      <button id="drawBtn" class="primary">LOSUJ ğŸ</button>
      <div id="wynik" aria-live="polite"></div>
      <div id="presentRow" style="margin-top:16px"></div>
    </div>
  </div>
</div>

<audio id="bells" preload="auto" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_f3e5529f65.mp3?filename=christmas-bells-116138.mp3"></audio>

<script>
const results = {
  "BoÅ¼ena":"Basia","Jarek":"Danusia","Martyna":"Lena","Basia":"Jarek","Jurek":"Agnieszka",
  "Lena":"Piotrek","Konrad":"Maciek","Piotrek":"BoÅ¼ena","Agnieszka":"Jurek",
  "Kuba":"Konrad","Danusia":"Martyna","Maciek":"Stasia","Stasia":"Kuba"
};
const participants = Object.keys(results);

const drawBtn = document.getElementById('drawBtn');
const wynikEl = document.getElementById('wynik');
const ktoEl = document.getElementById('kto');
const presentRow = document.getElementById('presentRow');
const bells = document.getElementById('bells');

function getParam(name){return new URLSearchParams(window.location.search).get(name);}
const person = getParam('osoba');

if(!person){ ktoEl.innerText="BÅÄ„D: brak uczestnika w linku."; drawBtn.disabled=true; }
else if(!participants.includes(person)){ ktoEl.innerText=`Nieznany uczestnik: ${person}`; drawBtn.disabled=true; }
else{ ktoEl.innerText=`Witaj, ${person}! Kliknij LOSUJ, aby poznaÄ‡ swojego prezentodawcÄ™.`; }

const PRESENT_EMOJIS=["ğŸ","ğŸ§¸","ğŸ›ï¸","ğŸ•¯ï¸","ğŸ¬","ğŸ§¦","ğŸª"];
function showPresents(count=5){
  presentRow.innerHTML="";
  for(let i=0;i<count;i++){
    const sp=document.createElement('span');
    sp.className='present';
    sp.textContent=PRESENT_EMOJIS[i % PRESENT_EMOJIS.length];
    presentRow.appendChild(sp);
    setTimeout(()=>sp.classList.add('show'), 80 + i*120);
  }
}

drawBtn.addEventListener('click', ()=>{
  if(!person || !results[person]){ alert("BÅ‚Ä™dny link lub brak przypisanego wyniku."); return; }
  try{ bells.currentTime=0; bells.play(); }catch(e){}
  showPresents(6);
  setTimeout(()=>{ wynikEl.textContent=`WylosowaÅ‚eÅ›: ${results[person]} ğŸ`; },700);
});
</script>
</body>
</html>